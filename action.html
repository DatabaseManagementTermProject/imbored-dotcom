<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Simple Test</title>
        
    </head>
    <body>
        <form class="form">
            <select name="library" id="library">
                <option value="books">Books</option>
                <option value="movies">Movies</option>
                <option value="videogames">Video Games</option>
            </select>
            <select name="action" id="action">
                <option value="getArray">getArray</option>
                <option value="add">Add</option>
                <option value="delete">Delete</option>
            </select>
            TableID: <input type="text" name="tableID" id="tableID">
            <br><br>
            <button type="submit">Submit</button>
        </form>
        <p id="textDisplay">Display here</p>
        
        <script>
            const formEL = document.querySelector("form");
            formEL.addEventListener("submit", event => {
                event.preventDefault();
                const formData = new FormData(formEL);

                var url;
                var id = document.getElementById("tableID").value;
                var library = document.getElementById("library").value;

                // decide and build the endpoint
                if (id){
                    url = `http://localhost:3002/${library}/${id}`;
                } else {
                    url = `http://localhost:3002/${library}`;
                }

                fetch(url)
                    .then(res => res.json())
                    .then(data => {
                        console.log(data);

                        const id = Number(document.getElementById("tableID").value);

                        // if there is an id, then display the the title
                        if (id){
                            document.getElementById("textDisplay").innerHTML = data["title"];
                        } else {
                            // somehow show all of the items in the array. Generate a table.
                        }

                    })
                    .catch(error => console.log(error));
                

                // let display = "library: " + library + "<br>action: " + action + "<br>tableID: " + tableID;

            })
        </script>
    </body>
</html>
